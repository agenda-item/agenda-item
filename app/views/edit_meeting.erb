<div id="app" class="container">
<div class="columns">
  <div class="column is-one-quarter">
    <div class="">
      <aside class="menu">
        <p class="menu-label">
          Agenda Items
        </p>
          <div class="center-element">
            <span class="icon">  
              <i class="fa fa-plus-square"></i>
            </span>
          </div>

        <ul>
          <agenda-menu></agenda-menu>
        </ul>
      </aside>
    </div>
  </div>
  
  <div class="column">
    <div class="section ai-agenda-item">
        <div class="box">
          <h2 class="subtitle is-3"><icon></icon> {{#type}}</h2>
          <div class="ai-title">
            <div class="control">

              <label class="label">Title</label>
              <input class="input" type="text" placeholder="{{ @motion.title }}">
            </div>
          </div>
          <div class="ai-description">
            <label class="label">Motion</label>
            <div class="control">
              <textarea class="textarea" placeholder="{{ @motion.description }}"></textarea>
            </div>
          </div>
          <div class="ai-responsible">
            <label class="label">Mover</label>
            <input class="input" type="text" placeholder="{{ @motion.mover.first_name }}">
          </div>
          <div class="ai-responsible">
            <label class="label">Seconder</label>
            <input class="input" type="text" placeholder="{{ @motion.seconder.first_name }}">
          </div>
          <div class="ai-vote">
            <p>** if not logged</p>
            <a class="button">
              Log Votes
            </a>
            <p>** if logged</p>
            <article class="message">
                <div class="message-header in-favour" >
                  <span class="icon">  
                    <i class="fa fa-checkbox-marked-circle-outline"></i>
                  </span>
                  In Favour
                </div>
                <div class="message-body">
                  <span class="ai-user tag is-medium">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span>
                  
                  <span class="ai-user tag is-medium">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span>
                  
                  <span class="ai-user tag is-medium">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span>
                  
                  <span class="ai-user tag is-medium">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span>
                  
                  <span class="ai-user tag is-medium">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span>
                  
                  <span class="ai-user tag is-medium">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span>
        
                </div>
              </article>
              <article class="message">
                <div class="message-header opposed">
                 <span class="icon">  
                   <i class="fa fa-close-circle-outline"></i>
                 </span>
                  Opposed
                </div>
                <div class="message-body">
                 <span class="ai-user tag is-medium opposed">
                   <span class="icon">
                       <i class="fa fa-person"></i>
                     </span>
                   {{ user.first_name }}
                 </span><span class="ai-user tag is-medium opposed">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span><span class="ai-user tag is-medium opposed">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span>
                </div>
              </article>
              <article class="message">
                <div class="message-header abstain">
                  <span class="icon">  
                    <i class="fa fa-checkbox-blank-circle-outline"></i>
                  </span>
                  Abstain
                </div>
                <div class="message-body">
                  <span class="ai-user tag is-medium abstain">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span>
                  <span class="ai-user tag is-medium abstain">
                    <span class="icon">
                        <i class="fa fa-person"></i>
                      </span>
                    {{ user.first_name }}
                  </span>     
                </div>
              </article>
              <a class="button">
                Adjust Votes
              </a>
            </div>
          <div class="ai-minutes">
            <label class="label">Discussion</label>
            <div class="control">
              <textarea class="textarea" placeholder="{{ @motion.discussion }}"></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<template id="agenda-menu-template">

  <ul>
    <div v-for="agendaItem in agendaItems">
      <li>{{agendaItem.title}}</li>
    </div>
  </ul>
</template>

<!-- <template id="agenda-menu-li-template">
  <li>{{ agendaItem.title }}</li>
</template> -->

<script>

  Vue.component('agenda-menu', {
    template: '#agenda-menu-template',
    data: function() {
      return {
        agendaItems: []
      }
    },
    created: function() {
      this.$http.get('/api/agenda-items').then(function(response){
        this.agendaItems = response.json();
      }.bind(this));
    }
  });  

  // Vue.component('agenda-menu-li', {
  //   template: 'agenda-menu-li-template',
  //   props: ['agendaItem']
  // });

  new Vue({
    el: '#app'
  });

</script>